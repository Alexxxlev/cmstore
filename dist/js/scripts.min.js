const mapsAvailability=()=>{ymaps.ready(()=>{const c=new ymaps.Map("map-availability",{center:[45.056021,39.020867],zoom:10});window.addEventListener("resize",()=>{setTimeout(()=>{c.container.fitToViewport(c.container.getSize())},500)});const l=ymaps.templateLayoutFactory.createClass('<div class="ballon">$[[options.contentLayout]]</div>'),n=ymaps.templateLayoutFactory.createClass("<p>$[properties.balloonContent]</p>");var e=document.querySelectorAll(".availability__li");e.forEach(e=>{var r,t,a,o=e.querySelector(".availability__address").textContent,e=e.innerHTML;r=o,t=e,a=c,ymaps.geocode(r,{boundedBy:[[45.084989,38.927612],[45.016677,39.042607]]}).then(e=>{e=e.geoObjects.get(0);const o=new ymaps.Placemark(e.geometry.getCoordinates(),{hintContent:r,balloonHeader:r,balloonContent:t},{iconLayout:"default#image",iconImageHref:"img/icon/pointer.svg",iconImageSize:[24,32],iconImageOffset:[-11,-16],balloonLayout:l,balloonContentLayout:n,balloonPanelMaxMapArea:0,hideIconOnBalloonOpen:!1});a.geoObjects.add(o),o.events.add("click",()=>{document.querySelectorAll(".availability__li").forEach(e=>{e.classList.remove("availability__li_active")});var e=[...document.querySelectorAll(".availability__address")].find(e=>e.textContent.includes(r)),e=(e&&e.closest(".availability__li").classList.add("availability__li_active"),document.querySelector(".availability__button-bt").classList.remove("_disabled"),a.geoObjects.each(function(e){e.options.set("iconImageSize",[24,32]),e.options.set("iconImageOffset",[-12,-16])}),o.options.set("iconImageSize",[45,60]),o.options.set("iconImageOffset",[-22.5,-60]),o.geometry.getCoordinates()),t=a.getZoom(),t=e[0]-((t=t)<10?.002:t<=15?.0075:15<=t?5e-5:.001);a.panTo([t,e[1]],{flying:!0,duration:1e3}),o.balloon.open()})})}),e.forEach(e=>{e.addEventListener("click",()=>{document.querySelector(".availability__li_active")&&document.querySelector(".availability__li_active").classList.remove("availability__li_active"),e.classList.add("availability__li_active"),document.querySelector(".availability__button-bt").classList.remove("_disabled");const t=e.querySelector(".availability__address").textContent;c.geoObjects.each(e=>{e.properties.get("hintContent")===t&&(c.geoObjects.each(function(e){e.options.set("iconImageSize",[24,32]),e.options.set("iconImageOffset",[-12,-16])}),e.options.set("iconImageSize",[45,60]),e.options.set("iconImageOffset",[-22.5,-60]),c.panTo(e.geometry.getCoordinates(),{flying:!0,duration:1e3}),e.balloon.open())})})})})};if(document.addEventListener("click",e=>{e.target.classList.contains("availability-tabs__link")&&(e.preventDefault(),document.querySelectorAll(".availability-tabs__link").forEach(e=>{e.classList.remove("_current")}),e.target.classList.add("_current"),e.target.classList.contains("link-map")&&(document.querySelector(".availability-tabs__box_map").classList.add("_show"),document.querySelector(".availability-tabs__box_list-box").classList.remove("_show")),e.target.classList.contains("link-list"))&&(document.querySelector(".availability-tabs__box_list-box").classList.add("_show"),document.querySelector(".availability-tabs__box_map").classList.remove("_show"))}),document.querySelectorAll(".basket__counter").length){const F=e=>{e.value<2?e.closest(".basket__counter").querySelector(".basket__counter-bt_minus").classList.add("_disabled"):e.closest(".basket__counter").querySelector(".basket__counter-bt_minus").classList.remove("_disabled")};document.querySelectorAll(".basket__counter-text").forEach(e=>{F(e)}),document.querySelectorAll(".basket__counter-text").forEach(e=>{e.addEventListener("keydown",e=>{-1!==[46,8,9,27,13,110,190].indexOf(e.keyCode)||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||67===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||86===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||88===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40||((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),F(e.target))}),e.addEventListener("input",e=>{e.target.value=e.target.value.replace(/\D/g,""),"0"===e.target.value&&(e.target.value="1"),3<e.target.value&&(Fancybox.show([{src:"#max",type:"inline"}]),e.target.value="3"),F(e.target)}),e.addEventListener("blur",e=>{""===e.target.value&&(e.target.value="1"),F(e.target)})}),document.addEventListener("click",e=>{if(e.target.classList.contains("basket__counter-bt_minus")&&(e.preventDefault(),1<(t=+(o=e.target.closest(".basket__counter").querySelector(".basket__counter-text")).value)&&(o.value=--t),F(o)),e.target.classList.contains("basket__counter-bt_plus")){e.preventDefault();var t=e.target.closest(".basket__counter").querySelector(".basket__counter-text"),o=+t.value;if(2<o)return Fancybox.show([{src:"#max",type:"inline"}]),!1;t.value=++o,F(t)}})}if(document.querySelectorAll(".basket-recommendation").length&&(document.querySelectorAll(".basket-recommendation__slider").forEach(e=>{new Swiper(".basket-recommendation__slider",{slidesPerView:"auto",spaceBetween:8,slidesPerGroup:2,grabCursor:!0,resistanceRatio:.65,speed:400,direction:"horizontal",mousewheel:{enabled:!0,forceToAxis:!0},freeMode:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{768:{spaceBetween:16},800:{slidesPerGroup:3},920:{slidesPerGroup:3},1024:{slidesPerGroup:4},1230:{slidesPerGroup:5},1440:{spaceBetween:8,slidesPerGroup:2}}});e.addEventListener("wheel",e=>{0!==e.deltaX&&e.preventDefault()})}),document.addEventListener("click",e=>{e.target.classList.contains("basket__recommendation-link")&&(e.preventDefault(),e.target.classList.toggle("_active"),e.target.closest(".basket__item").querySelector(".basket-recommendation").classList.toggle("_hide")),e.target.classList.contains("basket-recommendation__bt")&&(e.preventDefault(),e.target.classList.toggle("_active"),e.target.classList.contains("_active"))&&(document.querySelector(".basket-recommendation__ok").classList.add("basket-recommendation__ok_active"),setTimeout(()=>{document.querySelector(".basket-recommendation__ok").classList.remove("basket-recommendation__ok_active")},5e3))})),document.querySelectorAll(".basket__info").length&&document.querySelectorAll(".basket__info").forEach(e=>{var t=e.querySelector(".basket__box").cloneNode(!0);t.classList.add("_clone"),e.querySelector(".basket__name").insertAdjacentElement("afterend",t)}),document.addEventListener("click",e=>{e.target.classList.contains("basket__sidebar-sale-link")&&(e.preventDefault(),e.target.closest(".basket__sidebar-sale").classList.toggle("_active"))}),document.querySelectorAll(".basket__control-open").length&&document.addEventListener("click",e=>{e.target.classList.contains("basket__control-open")&&(e.preventDefault(),e.target.closest(".basket__item").classList.add("_active")),(e.target.classList.contains("basket__control-mob-bg")||e.target.classList.contains("basket__control-mob-close"))&&(e.preventDefault(),document.querySelectorAll(".basket__item").forEach(e=>{e.classList.remove("_active")}))}),document.querySelectorAll(".basket__checkbox").length){const aa=document.querySelectorAll(".basket__item:not(.basket__item_not-available) .basket__checkbox-item input, .basket-complect__head-check input");function areAllCheckboxesChecked(){return Array.from(aa).every(e=>e.checked)}aa.forEach(e=>{e.addEventListener("click",()=>{var e=areAllCheckboxesChecked();document.querySelector(".basket__checkbox input").checked=e,btRemoveAll()})}),document.querySelectorAll(".basket__checkbox .checkbox__input").forEach(e=>{e.addEventListener("change",e=>{e.target.checked?document.querySelectorAll(".basket__checkbox-item, .basket-complect__head-check").forEach(e=>{e.querySelector("input").checked=!0}):document.querySelectorAll(".basket__checkbox-item, .basket-complect__head-check").forEach(e=>{e.querySelector("input").checked=!1}),btRemoveAll()})})}const btRemoveAll=()=>{(document.querySelectorAll(".basket__remove-all").length||document.querySelectorAll(".basket__checkbox-item, .basket-complect__head-check").length)&&(document.querySelectorAll(".basket__checkbox-item input:not([disabled]):checked, .basket-complect__head-check input:not([disabled]):checked").length?(document.querySelector(".basket__remove-all span").textContent="Удалить выбранные",document.querySelector(".basket__remove-all").dataset.src="#remove-check",document.querySelectorAll(".basket__sidebar, .basket-menu").forEach(e=>{e.classList.remove("_hide"),e.querySelector(".basket__buy").classList.remove("_disabled")})):(document.querySelector(".basket__remove-all span").textContent="Удалить все",document.querySelector(".basket__remove-all").dataset.src="#remove-all",document.querySelectorAll(".basket__sidebar, .basket-menu").forEach(e=>{e.classList.add("_hide"),e.querySelector(".basket__buy").classList.add("_disabled")})))};if(btRemoveAll(),document.querySelectorAll(".basket__sidebar").length){let e=document.querySelector(".basket__sidebar").cloneNode(!0);e.classList.add("_clone"),document.querySelector(".basket__wrapper").insertAdjacentElement("beforeend",e)}if(document.querySelectorAll(".basket-menu").length&&document.querySelectorAll(".footer-small")&&document.querySelector(".footer-small").classList.add("bottom"),document.querySelectorAll(".box-hide").length){const la=document.querySelectorAll(".box-hide__link");document.addEventListener("click",e=>{var t;e.target.classList.contains("box-hide__link")&&(e.preventDefault(),"none"===(t=e.target.parentNode.previousElementSibling).style.display?(t.style.display="block",e.target.textContent=e.target.getAttribute("data-hide")):(t.style.display="none",e.target.textContent=e.target.getAttribute("data-vis")))})}if(document.querySelector(".card")){const oa=(e,t)=>{e=document.querySelector(e).cloneNode(!0);e.classList.add("_mobile"),document.querySelector(t).insertAdjacentElement("beforeend",e)},visibleContent=(document.querySelector(".cart-purchase")&&oa(".cart-purchase",".cart-parameter"),document.querySelector(".card__tabs")&&oa(".card__tabs",".card-sliders"),document.querySelector(".cart-purchase__complect")&&oa(".cart-purchase__complect",".card__preview"),e=>{document.querySelectorAll(".header__controll-hide").forEach(e=>{e.classList.remove("header__controll-hide_active")}),e.closest(".header__controll").querySelector(".header__controll-hide").classList.add("header__controll-hide_active"),setTimeout(()=>{e.closest(".header__controll").querySelector(".header__controll-hide").classList.remove("header__controll-hide_active")},2e3)}),pa=(document.addEventListener("click",e=>{var t;e.target.classList.contains("card__control-link_favorites")&&(e.target.classList.toggle("card__control-link_favorites_active"),e.target.classList.contains("card__control-link_favorites_active")?(document.querySelectorAll(".header__controll_favorites .header__controll-sum").length?(document.querySelector(".header__controll_favorites .header__controll-sum").textContent++,document.querySelector(".menu-footer__favorites .header__controll-sum").textContent++,animationCount(document.querySelectorAll(".header__controll_favorites, .menu-footer__favorites"))):(t='<span class="header__controll-sum">1</span>',document.querySelector(".header__controll_favorites").insertAdjacentHTML("beforeend",t),document.querySelector(".header__controll_favorites").classList.add("header__controll-link_active"),document.querySelector(".menu-footer__favorites").insertAdjacentHTML("beforeend",t),document.querySelector(".menu-footer__favorites").classList.add("menu-footer__control_active")),visibleContent(document.querySelector(".header__controll_favorites"))):1!=+document.querySelector(".header__controll_favorites .header__controll-sum").textContent?(document.querySelector(".header__controll_favorites .header__controll-sum").textContent--,document.querySelector(".menu-footer__favorites .header__controll-sum").textContent--,animationCount(document.querySelectorAll(".header__controll_favorites, .menu-footer__favorites"))):(document.querySelector(".header__controll_favorites").classList.remove("header__controll-link_active"),document.querySelector(".header__controll_favorites .header__controll-sum").remove(),document.querySelector(".menu-footer__favorites .header__controll-sum").remove())),e.target.classList.contains("card__control-link_compare")&&(e.preventDefault(),e.target.classList.toggle("card__control-link_compare_active"),e.target.classList.contains("card__control-link_compare_active")?(document.querySelectorAll(".header__controll_compare .header__controll-sum").length?(document.querySelector(".header__controll_compare .header__controll-sum").textContent++,animationCount(document.querySelectorAll(".header__controll_compare"))):(document.querySelector(".header__controll_compare").insertAdjacentHTML("beforeend",'<span class="header__controll-sum">1</span>'),document.querySelector(".header__controll_compare").classList.add("header__controll-link_active")),visibleContent(document.querySelector(".header__controll_compare"))):1!=+document.querySelector(".header__controll_compare .header__controll-sum").textContent?(document.querySelector(".header__controll_compare .header__controll-sum").textContent--,animationCount(document.querySelectorAll(".header__controll_compare"))):(document.querySelector(".header__controll_compare .header__controll-sum").remove(),document.querySelector(".header__controll_compare").classList.remove("header__controll-link_active"))),e.target.classList.contains("cart-purchase__buy-button"),e.target.classList.contains("card__control-link_share")&&(e.preventDefault(),e.target.closest(".card__control-link-box").classList.toggle("_active"),document.documentElement.classList.toggle("head-hide")),(e.target.classList.contains("card__control-bg")||e.target.classList.contains("card__control-close"))&&(e.target.closest(".card__control-link-box").classList.remove("_active"),document.documentElement.classList.remove("head-hide")),document.querySelector(".card__control-link-box").contains(e.target)||(document.querySelector(".card__control-link-box").classList.remove("_active"),document.documentElement.classList.remove("head-hide"))}),document.querySelectorAll(".cart-purchase__buy")),qa=document.querySelector(".cart-fixed"),ra=()=>{pa.forEach(e=>{var{top:e,bottom:t}=e.getBoundingClientRect();0!=e&&0!=t&&(e<window.innerHeight&&0<t?qa.classList.remove("_show"):qa.classList.add("_show"))})};window.addEventListener("scroll",ra),$(".detail-catalog--mini-slider").length&&(document.querySelectorAll(".card-sliders__thumb-slide").length<4&&document.querySelector(".card-sliders__thumb").classList.add("card-sliders__thumb_small"),1==document.querySelectorAll(".card-sliders__thumb-slide").length&&document.querySelector(".card-sliders__thumb-box").classList.add("card-sliders__thumb-box_hide"),$(document).ready(function(){$(document).find(".detail-catalog--mini-slider").slick({vertical:!0,verticalSwiping:!0,swipeToSlide:!0,slidesToShow:4,slidesToScroll:4,centerPadding:!0,asNavFor:".detail-catalog--main-slider--content",prevArrow:`<button class="slick-prev slick-arrow" aria-label="Prev" type="button" style="">
                                <svg>
                                    <use xlink:href="img/sprite.svg#icon-arrow-slider"></use>
                                </svg>
                            </button>`,nextArrow:`<button class="slick-next slick-arrow" aria-label="Next" type="button" style="">
                                <svg>
                                    <use xlink:href="img/sprite.svg#icon-arrow-slider"></use>
                                </svg>
                            </button>`,responsive:[{breakpoint:1440,settings:{vertical:!1,verticalSwiping:!1}}]});var e=$(document).find(".detail-catalog--main-slider--content").slick({slidesToShow:1,slidesToScroll:1,dots:!0,edgeFriction:.01,speed:200,touchThreshold:15,asNavFor:$(document).find(".detail-catalog--mini-slider").is("div")?".detail-catalog--mini-slider":"",prevArrow:`<button class="slick-prev slick-arrow" aria-label="Prev" type="button" style="">
                                <svg>
                                    <use xlink:href="img/sprite.svg#icon-arrow-slider"></use>
                                </svg>
                            </button>`,nextArrow:`<button class="slick-next slick-arrow" aria-label="Next" type="button" style="">
                                <svg>
                                    <use xlink:href="img/sprite.svg#icon-arrow-slider"></use>
                                </svg>
                            </button>`});$(document).on("click",".detail-catalog--mini-slider--item",function(){e.slick("slickGoTo",$(this).parent().parent().attr("data-slick-index"))})}))}class CustomSwiper{constructor(e){this.swiperContainer=e,this.swiperWrapper=this.swiperContainer.querySelector(".catalog-body__img-sl-wrapper"),this.swiperPagination=this.swiperContainer.querySelector(".swiper-pagination"),this.overlayBlock=document.createElement("div"),this.overlayBlock.className="overlay-block",this.overlayBlocks=[],this.initSwiper(),this.addOverlayBlocks(),this.toggleElementsVisibility()}initSwiper(){this.swiper=new Swiper(this.swiperContainer,{spaceBetween:30,loop:!0,pagination:{el:this.swiperPagination,clickable:!0}}),this.swiperContainer.appendChild(this.overlayBlock)}addOverlayBlocks(){var t=this.swiper.slides.length;for(let e=0;e<t;e++){const o=document.createElement("div");o.className="overlay-block-item",o.setAttribute("data-slide-index",e),o.addEventListener("mouseenter",()=>{var e=parseInt(o.getAttribute("data-slide-index"));this.swiper.slideTo(e)}),this.overlayBlocks.push(o),this.overlayBlock.appendChild(o)}}toggleElementsVisibility(){this.swiper.slides.length<=1&&(this.swiperPagination.style.display="none",this.overlayBlock.style.display="none")}}if(0<document.querySelectorAll(".catalog-body__img-sl").length){const Ka=document.querySelectorAll(".catalog-body__img-sl:not(.swiper-slide-active)");Ka.forEach(e=>{new CustomSwiper(e)})}const animationCount=e=>{e.forEach(e=>{e.querySelector(".header__controll-sum").classList.remove("addCount"),setTimeout(()=>{e.querySelector(".header__controll-sum").classList.add("addCount")},100)})},visibleContent=e=>{document.querySelectorAll(".header__controll-hide").forEach(e=>{e.classList.remove("header__controll-hide_active")}),e.closest(".header__controll").querySelector(".header__controll-hide").classList.add("header__controll-hide_active"),setTimeout(()=>{e.closest(".header__controll").querySelector(".header__controll-hide").classList.remove("header__controll-hide_active")},2e3)},insuranceBasket=()=>{document.querySelectorAll(".cart-purchase__guarantee-link-box").forEach(e=>{e.innerHTML="<p>Товар уже в корзине, добавлять и удалять защиту устройства можно там</p>"}),document.querySelectorAll(".cart-purchase__guarantee-text").forEach(e=>{e.innerHTML="Защитите устройство от&nbsp;повреждений или&nbsp;продлите гарантию с&nbsp;максимальной выгодой"}),document.querySelectorAll(".cart-purchase__guarantee-price").forEach(e=>{e.innerHTML="от 1 800₽"}),document.querySelectorAll(".cart-purchase__guarantee-link-box").forEach(e=>{e.innerHTML="<p>Товар уже в корзине, добавлять и удалять защиту устройства можно там</p>"}),document.querySelectorAll(".cart-purchase__buy-insurance").length&&document.querySelectorAll(".cart-purchase__buy-insurance").forEach(e=>{e.remove()}),document.querySelectorAll(".cart-fixed__price-order").length&&document.querySelectorAll(".cart-fixed__price-order").forEach(e=>{e.remove()})},citySearchInput=(document.addEventListener("click",e=>{var t;e.target.classList.contains("catalog-control__button_list")&&(e.preventDefault(),document.querySelector(".catalog-body").classList.add("catalog-body_list"),document.querySelector(".catalog-control__button_grid").classList.remove("catalog-control__button_active"),e.target.classList.add("catalog-control__button_active")),e.target.classList.contains("catalog-control__button_grid")&&(e.preventDefault(),document.querySelector(".catalog-body").classList.remove("catalog-body_list"),document.querySelector(".catalog-control__button_list").classList.remove("catalog-control__button_active"),e.target.classList.add("catalog-control__button_active")),e.target.classList.contains("catalog-body__price-info-icon")&&e.target.classList.add("_active"),(e.target.classList.contains("catalog-body__price-info-content-bg")||e.target.classList.contains("catalog-body__price-info-close"))&&(e.preventDefault(),e.target.closest(".catalog-body__price-info").querySelector(".catalog-body__price-info-icon").classList.remove("_active")),e.target.classList.contains("catalog-body__favorites")&&(e.preventDefault(),e.target.classList.toggle("catalog-body__control-icon_active"),e.target.classList.contains("catalog-body__control-icon_active")?(document.querySelectorAll(".header__controll_favorites .header__controll-sum").length?(document.querySelector(".header__controll_favorites .header__controll-sum").textContent++,document.querySelector(".menu-footer__favorites .header__controll-sum").textContent++,animationCount(document.querySelectorAll(".header__controll_favorites, .menu-footer__favorites"))):(t='<span class="header__controll-sum">1</span>',document.querySelector(".header__controll_favorites").insertAdjacentHTML("beforeend",t),document.querySelector(".header__controll_favorites").classList.add("header__controll-link_active"),document.querySelector(".menu-footer__favorites").insertAdjacentHTML("beforeend",t),document.querySelector(".menu-footer__favorites").classList.add("menu-footer__control_active")),visibleContent(document.querySelector(".header__controll_favorites"))):1!=+document.querySelector(".header__controll_favorites .header__controll-sum").textContent?(document.querySelector(".header__controll_favorites .header__controll-sum").textContent--,document.querySelector(".menu-footer__favorites .header__controll-sum").textContent--,animationCount(document.querySelectorAll(".header__controll_favorites, .menu-footer__favorites"))):(document.querySelector(".header__controll_favorites").classList.remove("header__controll-link_active"),document.querySelector(".header__controll_favorites .header__controll-sum").remove(),document.querySelector(".menu-footer__favorites .header__controll-sum").remove())),e.target.classList.contains("catalog-body__compare")&&(e.preventDefault(),e.target.classList.toggle("catalog-body__control-icon_active"),e.target.classList.contains("catalog-body__control-icon_active")?(document.querySelectorAll(".header__controll_compare .header__controll-sum").length?(document.querySelector(".header__controll_compare .header__controll-sum").textContent++,animationCount(document.querySelectorAll(".header__controll_compare"))):(document.querySelector(".header__controll_compare").insertAdjacentHTML("beforeend",'<span class="header__controll-sum">1</span>'),document.querySelector(".header__controll_compare").classList.add("header__controll-link_active")),visibleContent(document.querySelector(".header__controll_compare"))):1!=+document.querySelector(".header__controll_compare .header__controll-sum").textContent?(document.querySelector(".header__controll_compare .header__controll-sum").textContent--,animationCount(document.querySelectorAll(".header__controll_compare"))):(document.querySelector(".header__controll_compare .header__controll-sum").remove(),document.querySelector(".header__controll_compare").classList.remove("header__controll-link_active"))),e.target.classList.contains("catalog-body__basket")&&(e.preventDefault(),e.target.classList.toggle("catalog-body__basket_active"),e.target.classList.contains("catalog-body__basket_active")?(e.target.querySelector("span")?e.target.querySelector("span").textContent=e.target.dataset.ok:e.target.textContent=e.target.dataset.ok,document.querySelectorAll(".header__controll_basket .header__controll-sum").length?(document.querySelector(".header__controll_basket .header__controll-sum").textContent++,document.querySelector(".menu-footer__basket .header__controll-sum").textContent++,animationCount(document.querySelectorAll(".menu-footer__basket, .header__controll_basket"))):(t='<span class="header__controll-sum">1</span>',document.querySelector(".header__controll_basket").insertAdjacentHTML("beforeend",t),document.querySelector(".header__controll_basket").classList.add("header__controll-link_active"),document.querySelector(".menu-footer__basket").insertAdjacentHTML("beforeend",t),document.querySelector(".menu-footer__basket").classList.add("menu-footer__control_active")),visibleContent(document.querySelector(".header__controll_basket")),document.querySelectorAll(".cart-purchase__guarantee-link-box").length&&insuranceBasket()):(e.target.querySelector("span")?e.target.querySelector("span").textContent=e.target.dataset.no:e.target.textContent=e.target.dataset.no,1!=+document.querySelector(".header__controll_basket .header__controll-sum").textContent?(document.querySelector(".header__controll_basket .header__controll-sum").textContent--,document.querySelector(".menu-footer__basket .header__controll-sum").textContent--,animationCount(document.querySelectorAll(".menu-footer__basket, .header__controll_basket"))):(document.querySelector(".header__controll_basket .header__controll-sum").remove(),document.querySelector(".menu-footer__basket .header__controll-sum").remove(),document.querySelector(".header__controll_basket").classList.remove("header__controll-link_active")))),e.target.classList.contains("catalog-body__basket-complect")&&(e.preventDefault(),document.querySelectorAll(".catalog-body__basket-complect").forEach(e=>{e.classList.remove("catalog-body__basket-complect_active")}),e.target.classList.toggle("catalog-body__basket-complect_active"),e.target.classList.contains("catalog-body__basket-complect_active")?e.target.querySelector("span")?e.target.querySelector("span").textContent=e.target.dataset.ok:e.target.textContent=e.target.dataset.ok:e.target.querySelector("span")?e.target.querySelector("span").textContent=e.target.dataset.no:e.target.textContent=e.target.dataset.no)}),document.querySelector(".search-result-output__category-box")&&window.addEventListener("resize",()=>{var e=document.querySelector(".search-result-output__category-box"),r=e.getBoundingClientRect().width,a=Array.from(e.querySelectorAll(".search-result-output__category-link")).reduce((e,t)=>e+t.offsetWidth,0);if(r<a){a=Math.ceil(a/r);const c=Math.ceil(e.children.length/a);let t=0,o=0;Array.from(e.children).forEach(e=>{e.style.order=t,++o===c&&(t++,o=0)})}}),document.addEventListener("click",e=>{e.target.classList.contains("city-search__clear")&&(e.target.closest(".city-search__box").querySelector(".city-search__input").value="",e.target.closest(".city-search__box").querySelector(".city-search__input").classList.remove("input-text-val"),e=e.target.closest(".fancybox__slide"))&&e.scrollTo({top:0,behavior:"smooth"})}),document.querySelector(".city-search__input"));if(citySearchInput&&(citySearchInput.addEventListener("focus",function(){this.classList.add("input-text-focus")}),citySearchInput.addEventListener("blur",function(){setTimeout(()=>{this.classList.remove("input-text-focus")},300)})),document.querySelectorAll(".bx-filter").length){let t=()=>{document.querySelectorAll(".bx-filter-block").forEach(e=>{e.querySelectorAll("input:checked").length?e.closest(".bx-filter-parameters-box").classList.add("_active"):e.closest(".bx-filter-parameters-box")&&e.closest(".bx-filter-parameters-box").classList.remove("_active")})};t();const m0=()=>{document.querySelectorAll(".catalog-chips").forEach(o=>{for(o.classList.remove("catalog-chips_active");o.firstChild;)o.removeChild(o.firstChild);const r='<svg><use xlink:href="img/sprite.svg#icon-close"></use></svg>';document.querySelectorAll(".bx-filter-block input:checked").forEach(e=>{var t=e.nextElementSibling.innerHTML,e=`<a href="#" class="catalog-chips__chip" data-id="${e.getAttribute("id")}">${t}${r}</a>`;o.insertAdjacentHTML("beforeend",e)}),document.querySelectorAll("price-range").forEach(e=>{var t;e.querySelector(".min-price").value==e.querySelector('input[type="range"]').getAttribute("min")&&e.querySelector(".max-price").value==e.querySelector('input[type="range"]').getAttribute("max")||(t=e.dataset.title,e=`<a href="#" class="catalog-chips__chip-range" data-id="${e.getAttribute("id")}">${t}${r}</a>`,o.insertAdjacentHTML("beforeend",e))}),document.querySelectorAll(".catalog-chips__chip, .catalog-chips__chip-range").length?(r,o.insertAdjacentHTML("beforeend",'<a href="#" class="catalog-chips__removeAll">Сбросить всё <svg><use xlink:href="img/sprite.svg#icon-close"></use></svg></a>'),o.classList.add("catalog-chips_active")):(document.querySelectorAll(".catalog-chips_active").forEach(e=>{e.classList.remove("catalog-chips_active")}),document.querySelectorAll(".catalog-chips__removeAll").forEach(e=>{e.remove()}))});var e=document.querySelectorAll(".catalog-head .catalog-chips__chip-range, .catalog-head .catalog-chips__chip").length;e?(document.querySelector(".filter-open__counter")&&document.querySelector(".filter-open__counter").remove(),e=`<span class="filter-open__counter">${e}</span>`,document.querySelector(".filter-open").insertAdjacentHTML("afterbegin",e)):document.querySelector(".filter-open__counter")&&document.querySelector(".filter-open__counter").remove(),document.querySelectorAll(".filter-chips a").length?document.querySelector(".catalog-filter").classList.add("_chips"):document.querySelector(".catalog-filter").classList.remove("_chips")};function show(o,r){let a=null;const c=parseFloat(window.getComputedStyle(o).opacity);requestAnimationFrame(function e(t){t-=a=a||t;o.style.opacity=Math.min(t/r+c,1),t<r&&requestAnimationFrame(e)})}function hide(o,r){let a=null;const c=parseFloat(window.getComputedStyle(o).opacity);requestAnimationFrame(function e(t){t-=a=a||t;o.style.opacity=Math.max(1-t/r+c,0),t<r&&requestAnimationFrame(e)})}m0();const n0=e=>{var t=document.querySelector(`#${e} input[type="range"]`).getAttribute("min"),o=document.querySelector(`#${e} input[type="range"]`).getAttribute("max");document.querySelector(`#${e} .min-price`).value=t,document.querySelector(`#${e} .max-price`).value=o,document.querySelectorAll(`#${e} input[type="range"]`)[0].value=t,document.querySelectorAll(`#${e} input[type="range"]`)[1].value=o,document.querySelector(`#${e} .range-container > div`).style.background="linear-gradient(to right, var(--track-color) 0%, var(--track-highlight-color) 0%, var(--track-highlight-color) 100%, var(--track-color) 100%)"},o0=(document.querySelector(".smartfilter").addEventListener("change",e=>{t(),m0()}),document.addEventListener("click",e=>{var t;(e.target.classList.contains("filter-button")||e.target.classList.contains("smartfilter__close"))&&(e.preventDefault(),document.querySelector(".catalog-filter").classList.remove("catalog-filter_active"),document.documentElement.classList.remove("filter-open-mob")),e.target.classList.contains("filter-open")&&(e.preventDefault(),document.querySelector(".catalog-filter").classList.add("catalog-filter_active"),document.documentElement.classList.add("filter-open-mob")),e.target.classList.contains("linkShowFilter")&&(e.preventDefault(),t=e.target.closest(".bx-filter-block").querySelector(".bx-filter-parameters-box-container"),p0(t)),e.target.classList.contains("linkHideFilter")&&(e.preventDefault(),t=e.target.closest(".bx-filter-block").querySelector(".bx-filter-parameters-box-container"),o0(t)),e.target.classList.contains("bx-filter-parameters-box-title")&&e.target.closest(".bx-filter-parameters-box").classList.toggle("bx-active"),e.target.classList.contains("btn-reset")&&e.target.closest("form").reset(),e.target.classList.contains("catalog-chips__chip-range")&&(e.preventDefault(),n0(e.target.dataset.id),m0()),e.target.classList.contains("catalog-chips__chip")&&(e.preventDefault(),t=e.target.dataset.id,e.target.remove(),document.querySelector("#"+t).checked=!1,m0(),1==document.querySelectorAll(".catalog-chips a").length)&&(document.querySelectorAll(".catalog-chips a").forEach(e=>{e.remove()}),document.querySelectorAll(".catalog-chips").forEach(e=>{e.classList.remove("catalog-chips_active")}),document.querySelector(".catalog-filter").classList.remove("_chips")),e.target.classList.contains("catalog-chips__removeAll")&&(e.preventDefault(),document.querySelector("form.smartfilter").reset(),t=document.querySelectorAll(".catalog-chips"),document.querySelectorAll("price-range").forEach(e=>{e=e.getAttribute("id");n0(e)}),t.forEach(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)}),m0())}),document.querySelectorAll(".filter-search").forEach(e=>{e.addEventListener("input",e=>{let a=e.target.value.trim().toLowerCase();e.target.closest(".bx-filter-block").querySelectorAll(".bx-filter-param-label").forEach(e=>{var t=e.querySelector(".bx-filter-param-text").textContent.trim(),o=e.querySelector(".text").textContent.trim(),r=new RegExp(a,"ig"),r=o.replace(r,e=>`<b>${e}</b>`);e.querySelector(".text").innerHTML=r,e.style.display=t.toLowerCase().includes(a)||o.toLowerCase().includes(a)?"block":"none"}),a?(p0(e.target.nextElementSibling),e.target.closest("div").querySelector(".linkHideFilter").remove()):o0(e.target.nextElementSibling)})}),e=>{5<e.querySelectorAll(".checkbox").length&&(e.querySelectorAll(".checkbox").forEach((e,t)=>{4<t&&(e.style.display="none")}),e.closest(".bx-filter-block").querySelectorAll(".linkHideFilter").length&&e.closest(".bx-filter-block").querySelector(".linkHideFilter").remove(),e.insertAdjacentHTML("afterend",`<a href="#" class="linkShowFilter">
                                Показать все
                                <svg width="24" height="24">
                                    <use xlink:href="img/sprite.svg#icon-arrow-small"></use>
                                </svg>
                            </a>`))}),p0=e=>{e.querySelectorAll(".checkbox").forEach((e,t)=>{e.style.display="block"}),e.nextElementSibling.remove();e.insertAdjacentHTML("afterend",`<a href="#" class="linkHideFilter">
                            Свернуть
                            <svg width="24" height="24">
                                <use xlink:href="img/sprite.svg#icon-arrow-small"></use>
                            </svg>
                        </a>`)};document.querySelectorAll(".bx-filter-parameters-box-container").forEach(e=>{o0(e)})}document.addEventListener("click",e=>{e.target.classList.contains("footer__menu-title")&&(e.target.nextElementSibling.classList.toggle("footer__menu-link-container_active"),e.target.classList.toggle("footer__menu-title_active"))});const btnClone=()=>{var e=document.querySelector(".footer__button-service").cloneNode(!0),t=(e.classList.add("footer__button-service_tablet"),e.classList.add("footer__button-service_mobile"),e.cloneNode(!0)),e=e.cloneNode(!0);t.classList.remove("footer__button-service_mobile"),e.classList.remove("footer__button-service_tablet"),document.querySelector(".footer__contacts").insertAdjacentElement("afterend",t),document.querySelector(".footer__container").insertAdjacentElement("afterbegin",e)};if(document.querySelector(".footer__button-service")&&btnClone(),document.addEventListener("click",e=>{(e.target.classList.contains("header-city__question-button-close")||e.target.classList.contains("header-city__question-close")||e.target.classList.contains("header-city__question-bg")||e.target.classList.contains("header-city__question-button"))&&(e.preventDefault(),e.target.closest(".header-city").classList.remove("_active"),localStorage.setItem("city","1"))}),document.querySelector(".header-city")&&null==localStorage.getItem("city")&&document.querySelector(".header-city").classList.add("_active"),document.querySelectorAll(".header-item__remove-bt").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),e.target.closest(".header-item").remove()})}),document.addEventListener("click",e=>{e.target.classList.contains("header-phone-menu")&&(e.preventDefault(),e.target.classList.toggle("_active")),(e.target.classList.contains("header-phone-menu__bg")||e.target.classList.contains("header-phone-menu__close"))&&e.target.closest(".header-phone-menu").classList.remove("_active"),document.querySelector(".header-phone-menu")&&!document.querySelector(".header-phone-menu").contains(e.target)&&document.querySelector(".header-phone-menu").classList.remove("_active")}),document.querySelector(".header__buyers-link")){const Nb=document.querySelector(".header__buyers"),Ob=Array.from(Nb.querySelectorAll(".header__buyers-link"));Ob.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),t.classList.toggle("header__buyers-link_active")})}),document.addEventListener("click",e=>{!Nb.contains(e.target)&&Ob.some(e=>e.classList.contains("header__buyers-link_active"))&&Ob.forEach(e=>e.classList.remove("header__buyers-link_active"))})}document.documentElement.setAttribute("style",`--headH: ${document.querySelector("header").clientHeight}px`),window.addEventListener("resize",e=>{document.documentElement.setAttribute("style",`--headH: ${document.querySelector("header").clientHeight}px`)}),document.querySelectorAll(".header__search-input").length&&(document.querySelector(".header__search-input").addEventListener("focus",e=>{e.target.closest(".header__search").classList.add("header__search_focus")}),document.querySelector(".header__search-input").addEventListener("keyup",e=>{e.target.value?e.target.closest(".header__search").classList.add("header__search_val"):e.target.closest(".header__search").classList.remove("header__search_val")})),document.addEventListener("click",function(e){if(document.querySelector(".header__search")){const searchContainer=document.querySelector(".header__search");searchContainer.contains(e.target)||(searchContainer.classList.remove("header__search_val"),searchContainer.classList.remove("header__search_focus"))}var t,o;e.target.classList.contains("header__search-clear")&&(e.target.closest(".header__search").querySelector(".header__search-input").value="",e.target.closest(".header__search").classList.remove("header__search_val"),setTimeout(()=>{e.target.closest(".header__search").querySelector(".header__search-input").focus()},100)),e.target.classList.contains("header__search-cancel")&&(e.target.closest(".header__search").querySelector(".header__search-input").value="",document.querySelector(".header__search-input").classList.remove("input-text-val"),searchContainer.classList.remove("header__search_val"),searchContainer.classList.remove("header__search_focus")),e.target.classList.contains("search-result__clear-history")&&(e.preventDefault(),e.target.closest(".search-result__box").remove()),e.target.classList.contains("search-result__link-remove")&&(e.preventDefault(),e.target.closest(".search-result__link").remove(),document.querySelector(".search-result__box_history").querySelectorAll(".search-result__link").length||document.querySelector(".search-result__box_history").remove()),e.target.classList.contains("search-result__clue-link")&&(e.preventDefault(),t=e.target.textContent,o=e.target.closest(".header__search").querySelector(".header__search-input").value,e.target.closest(".header__search").querySelector(".header__search-input").value=o+" "+t)}),document.querySelectorAll(".header__search-input").length&&document.addEventListener("DOMContentLoaded",function(){const t=document.querySelectorAll(".header__search-form-placeholder-list li"),r=document.querySelector(".header__search-input");function a(e,t=0){var o;t<=e.length?(o=e.substring(0,t),r.placeholder=o+"|",setTimeout(function(){a(e,t+1)},100)):setTimeout(function(){!function e(t){if(0<r.placeholder.length){const o=t.substring(0,t.length-1);r.placeholder=o,setTimeout(function(){e(o)},50)}else setTimeout(function(){c()},500)}(e+"|")},1e3)}function c(){var e=Math.floor(Math.random()*t.length);a(t[e].textContent.trim())}c()}),document.querySelectorAll(".input-text").forEach(e=>{e.addEventListener("input",e=>{e.target.classList.toggle("input-text-val",e.target.value.length)})}),document.querySelectorAll(".textarea-text").forEach(e=>{e.addEventListener("input",e=>{e.target.classList.toggle("textarea-text-val",e.target.value.length)})});let insuranceOk=(t,e,o,r=0)=>{document.querySelectorAll(".cart-purchase__guarantee-text").forEach(e=>{e.textContent="Защита добавлена"}),document.querySelectorAll(".cart-purchase__guarantee-price").forEach(e=>{e.innerHTML=t+` <span>${o} ₽</span>`}),document.querySelectorAll(".cart-purchase__guarantee-link").forEach(e=>{e.textContent="Изменить выбор"});let a=`<a href="#" class="cart-purchase__guarantee-link-remove">
                        <svg>
                            <use xlink:href="img/sprite.svg#icon-remove"></use>
                        </svg>
                    </a>`,c=(document.querySelectorAll(".cart-purchase__guarantee-link-box").forEach(e=>{e.insertAdjacentHTML("beforeend",a)}),`<div class="cart-fixed__price-order">
                        1 товар + <a href="#" class="cart-fixed__price-order-link">защита</a>
                        <div class="cart-fixed__price-order-tooltip">
                            <div class="cart-fixed__price-order-tooltip-container">
                                <a href="#" class="cart-fixed__price-order-tooltip-close">
                                <svg width="24" height="24">
                                    <use xlink:href="img/sprite.svg#icon-close"></use>
                                </svg>
                                </a>
                                <p class="cart-fixed__price-order-tooltip-title">${t}</p>
                                <p class="cart-fixed__price-order-tooltip-desc">${e}</p>
                                <div class="cart-fixed__price-order-tooltip-box">
                                    <span>${o} ₽</span>
                                    ${a}
                                </div>
                            </div>
                        </div>
                        <div class="cart-fixed__price-order-tooltip-bg"></div>
                    </div>`),l=(document.querySelectorAll(".cart-fixed__price-box").forEach(e=>{e.insertAdjacentHTML("beforeend",c)}),`<div class="cart-purchase__buy-insurance">
                    <svg width="24" height="24">
                        <use xlink:href="img/sprite.svg#icon-insuranceOk"></use>
                    </svg>
                    <p>Защита устройства ${t}</p>
                 </div>`);document.querySelectorAll(".cart-purchase__buy-price").forEach(e=>{e.insertAdjacentHTML("afterend",l)}),document.querySelectorAll(".basket__item").length&&((e=document.querySelector(".basket__insurance-link._active")).closest(".basket__item").querySelectorAll(".basket__insurance").length&&e.closest(".basket__item").querySelector(".basket__insurance").remove(),r=`<div class="basket__insurance">
                                <div class="basket__insurance-box">
                                    <p class="basket__insurance-title">Защита устройства</p>
                                    <p class="basket__insurance-text">Программа страхования от ВСК ${t} (${r})</p>
                                </div>            
                                <div class="basket__insurance-control">
                                    <p class="basket__insurance-price">${o} ₽</p>
                                    <a href="#" class="basket__insurance-remove">
                                        <svg width="24" height="24">
                                            <use xlink:href="img/sprite.svg#icon-remove"></use>
                                        </svg>
                                    </a>
                                </div>            
                              </div>`,e.closest(".basket__item").insertAdjacentHTML("beforeend",r),e.classList.add("_hide"))},insuranceNo=e=>{document.querySelectorAll(".cart-purchase__guarantee-text").forEach(e=>{e.textContent="Защитите устройство от повреждений или продлите гарантию с максимальной выгодой"}),document.querySelectorAll(".cart-purchase__guarantee-price").forEach(e=>{e.textContent="от 1 800₽"}),document.querySelectorAll(".cart-purchase__guarantee-link-box").forEach(e=>{e.innerHTML=`<a href="#" class="cart-purchase__guarantee-link js-modal-inline" data-src="#insurance">
                            Выбрать защиту устройства
                            <svg>
                                <use xlink:href="img/sprite.svg#icon-arrow-left-link"></use>
                            </svg>
                        </a>`}),document.querySelectorAll(".cart-purchase__buy-insurance").length&&document.querySelectorAll(".cart-purchase__buy-insurance").forEach(e=>{e.remove()}),document.querySelectorAll(".cart-fixed__price-order").length&&document.querySelectorAll(".cart-fixed__price-order").forEach(e=>{e.remove()}),document.querySelectorAll(".basket__insurance").length&&(e.closest(".basket__item").querySelector(".basket__insurance-link").classList.remove("_hide"),e.closest(".basket__insurance").remove())};if(document.addEventListener("click",e=>{var t,o,r=e["target"];if(r.classList.contains("insurance-min-select__item")){var a=document.querySelectorAll(".insurance-min-select__item");const l=Array.from(a).indexOf(r);var c=r.querySelector(".insurance-min-select__price span").textContent;document.querySelector(".insurance-min-tab__button span").textContent=c,a.forEach(e=>{e.classList.remove("_current")}),r.classList.add("_current"),document.querySelectorAll(".insurance-min-tab").forEach((e,t)=>{t==l?(e.style.display="block",e.classList.add("_current")):(e.style.display="none",e.classList.remove("_current"))})}r.classList.contains("insurance-foot__select")&&(e.preventDefault(),c=+r.dataset.price,r.closest(".insurance-foot__list").querySelector("._current").classList.remove("_current"),r.classList.add("_current"),r.closest(".item").querySelector(".insurance-foot__price span")?r.closest(".item").querySelector(".insurance-foot__price span").textContent=c.toLocaleString("ru-RU"):document.querySelector(".insurance-min-tab__button span").textContent=c.toLocaleString("ru-RU")),r.classList.contains("cart-purchase__guarantee-link-remove")&&(e.preventDefault(),insuranceNo(e.target)),r.classList.contains("insurance-min-tab__button")&&(e.preventDefault(),r.classList.toggle("_active"),console.log(23),a=r.querySelector("span").textContent,c=document.querySelector(".insurance-min-select__item._current .insurance-min-select__title").textContent,t=document.querySelector(".insurance-min-select__item._current .insurance-min-select__desc").textContent,o=r.closest(".modal__insurance-content_mobile").querySelector(".item._current .insurance-foot__select._current").textContent,insuranceOk(c,t,a,o)),r.classList.contains("cart-fixed__price-order-link")&&(e.preventDefault(),r.closest(".cart-fixed__price-order").classList.toggle("_active"),document.documentElement.classList.toggle("head-hide-fix")),(r.classList.contains("cart-fixed__price-order-tooltip-close")||r.classList.contains("cart-fixed__price-order-tooltip-bg"))&&(e.preventDefault(),r.closest(".cart-fixed__price-order").classList.remove("_active"),document.documentElement.classList.remove("head-hide-fix")),r.classList.contains("insurance-foot__button")&&(e.preventDefault(),document.querySelectorAll(".insurance-foot__button._active").length&&!r.classList.contains("_active")&&((c=document.querySelector(".insurance-foot__button._active")).querySelector("span").textContent=r.dataset.no,c.querySelector("use").setAttribute("xlink:href","img/sprite.svg#icon-plus"),c.classList.remove("button__border"),c.classList.remove("_active")),r.classList.toggle("_active"),r.classList.toggle("button__border"),r.classList.contains("_active")?(r.querySelector("span").textContent=r.dataset.ok,r.querySelector("use").setAttribute("xlink:href","img/sprite.svg#icon-check-insurance"),t=r.closest(".insurance-foot__price-box").querySelector(".insurance-foot__price span").textContent,a=r.closest(".item").querySelector(".insurance-offers__title").textContent,o=r.closest(".item").querySelector(".insurance-offers__desc").textContent,c=r.closest(".item").querySelector(".insurance-foot__select._current").textContent,insuranceOk(a,o,t,c)):(insuranceNo(e.target),r.querySelector("span").textContent=r.dataset.no,r.querySelector("use").setAttribute("xlink:href","img/sprite.svg#icon-plus"))),e.target.classList.contains("basket__insurance-remove")&&(e.preventDefault(),insuranceNo(e.target))}),document.querySelectorAll(".js-mask").length&&document.querySelectorAll(".js-mask").forEach(e=>{IMask(e,{mask:"+{7}(000)000-00-00"})}),document.querySelectorAll(".menu").length){document.querySelectorAll(".menu-category__link").forEach(e=>{e.addEventListener("mouseenter",e=>{document.querySelectorAll(".menu-category__link_current").forEach(e=>{e.classList.remove("menu-category__link_current")}),document.querySelectorAll(".menu-catalog").forEach(e=>{e.classList.remove("menu-catalog_active")}),e.target.classList.add("menu-category__link_current");e=e.target.dataset.link;document.querySelectorAll("#"+e).length&&document.querySelector("#"+e).classList.add("menu-catalog_active"),gc.matches||(sizeMobile(gc.matches),r.reloadItems(),r.layout())}),e.addEventListener("click",e=>{e.preventDefault();e=e.target.dataset.link;document.querySelectorAll("#"+e).length&&document.querySelector("#"+e).classList.add("menu-catalog_active")})}),document.querySelectorAll(".menu-catalog__link_title").forEach(e=>{var t=e.textContent,t=`<a href="${e.getAttribute("href")}" class="menu-catalog__link-name">${t}</a>`;e.closest(".menu-catalog__li").querySelectorAll(".menu-catalog__content").length&&e.nextElementSibling.insertAdjacentHTML("afterbegin",t),e.addEventListener("click",e=>{window.matchMedia("(max-width: 1023px)").matches&&(e.preventDefault(),document.querySelectorAll(".menu-catalog__content_active").length&&document.querySelector(".menu-catalog__content_active").classList.remove("menu-catalog__content_active"),e.target.nextElementSibling.classList.add("menu-catalog__content_active"),e.target.closest(".menu-catalog").classList.add("_hide"))})}),document.querySelectorAll(".menu-catalog__li_all").forEach(e=>{e.insertAdjacentHTML("beforeend",'<div class="menu-catalog__content menu-catalog__content_all" data-title="Все товары из категории"></div>');var t=e.closest(".menu-catalog__list").querySelectorAll(".menu-catalog__content:not(.menu-catalog__content_all)");let o=e.querySelector(".menu-catalog__content_all");t.forEach(e=>{o.innerHTML+=e.innerHTML})}),document.querySelectorAll(".menu-catalog__content, .menu-catalog").forEach(e=>{e.insertAdjacentHTML("afterbegin",'<a href="#" class="menu-catalog__back">Назад</a>')}),document.querySelectorAll(".menu-catalog__back").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),document.querySelectorAll(".menu-catalog").forEach(e=>{e.classList.remove("_hide")}),e.target.closest(".menu-catalog__content_active")?e.target.closest(".menu-catalog__content_active").classList.remove("menu-catalog__content_active"):e.target.closest(".menu-catalog_active")&&e.target.closest(".menu-catalog_active").classList.remove("menu-catalog_active")})}),document.querySelectorAll(".header__menu-bt").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),e.target.classList.toggle("header__menu-bt_active"),document.querySelector(".menu-footer__control-menu").classList.toggle("menu-footer__control_active"),document.querySelector(".menu").classList.toggle("menu_active"),document.documentElement.classList.toggle("menu-open"),sizeMobile(gc.matches),document.addEventListener("click",outsideClickHandler)})}),document.querySelectorAll(".menu-footer__control-menu").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),document.querySelector(".menu").classList.toggle("menu_active"),document.documentElement.classList.toggle("menu-open"),e.target.classList.toggle("menu-footer__control_active"),document.querySelector(".header__menu-bt").classList.toggle("header__menu-bt_active"),sizeMobile(gc.matches)})}),document.querySelectorAll(".menu-catalog__list").forEach(e=>{var t;e.hasAttribute("data-title")&&(t=`<a href="#" class="menu-catalog__list-title">${e.dataset.title}</a>`,e.insertAdjacentHTML("beforebegin",t))});const dc=()=>{document.querySelectorAll(".menu-catalog__box").forEach(e=>{const t=e.querySelectorAll(".menu-catalog__link");if(5<t.length){t.forEach((e,t)=>{5<=t&&(e.style.display="none")});e.insertAdjacentHTML("beforeend",`
                    <a href="#" class="menu-catalog__link-show" data-vis="Еще" data-hid="Свернуть">
                        <span>Еще</span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 11L12 15L16 11" stroke="#2A65C5" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                    </a>
                `);const o=e.querySelector(".menu-catalog__link-show");o.addEventListener("click",function(){o.classList.toggle("_active"),o.classList.contains("_active")?(t.forEach(e=>{e.style.display="block"}),o.querySelector("span").textContent=o.dataset.hid):(t.forEach((e,t)=>{4<t&&(e.style.display="none")}),o.querySelector("span").textContent=o.dataset.vis),r.reloadItems(),r.layout()})}})},ec=(dc(),document.querySelector(".menu-catalog__list"));let r;function initMasonry(){r=new Masonry(ec,{itemSelector:".menu-catalog__li:not(.menu-catalog__li_all)",horizontalOrder:!0})}initMasonry();const gc=window.matchMedia("(max-width: 1024px)");function sizeMobile(e){e?document.querySelectorAll(".menu-category__link_current").length&&(document.querySelector(".menu-category__link_current").classList.remove("menu-category__link_current"),document.querySelector(".menu-catalog_active").classList.remove("menu-catalog_active"),r.destroy()):initMasonry()}sizeMobile(gc.matches),gc.addEventListener("change",function(e){sizeMobile(e.matches)});const hc=()=>{let e=document.querySelector("header").clientHeight-pageYOffset;document.querySelector("header").clientHeight<pageYOffset&&(e=0),document.documentElement.style.setProperty("--scroll",e+"px")};function outsideClickHandler(e){var t=document.querySelector(".menu"),o=document.querySelector(".header__menu-bt");t.contains(e.target)||o.contains(e.target)||(document.querySelector(".menu-footer__control-menu").classList.remove("menu-footer__control_active"),document.querySelector(".menu").classList.remove("menu_active"),document.querySelector(".header__menu-bt").classList.remove("header__menu-bt_active"),document.documentElement.classList.remove("menu-open"),sizeMobile(gc.matches),document.removeEventListener("click",outsideClickHandler))}setTimeout(()=>{hc()},10),window.addEventListener("scroll",function(){hc()}),document.documentElement.style.setProperty("--headH",` ${document.querySelector("header").clientHeight}px`),window.addEventListener("resize",e=>{document.documentElement.style.setProperty("--headH",` ${document.querySelector("header").clientHeight}px`),hc()}),document.querySelectorAll(".menu-catalog").forEach(e=>{e.addEventListener("scroll",e=>{var t=document.querySelector(".menu-catalog_active .menu-catalog__list").getBoundingClientRect().height-window.innerHeight,t=Math.max(0,Math.min(t,e.target.scrollTop));document.querySelector(".menu").style.setProperty("--scrollMenu",t+"px")})})}document.addEventListener("click",t=>{var e;t.target.classList.contains("js-modal-ajax")&&(t.preventDefault(),e=t.target.dataset.src,Fancybox.show([{src:e,type:"ajax",Carousel:{Navigation:!1},hideScrollbar:!1,Hash:!1,groupAttr:!1,autoFocus:!1}],{dragToClose:!1,on:{done:e=>{scrollBlock(),e.container.querySelectorAll(".catalog-body__img-sl:not(.swiper-slide-active)").length,e.container.querySelectorAll(".catalog-body__img-sl:not(.swiper-slide-active)").length&&e.container.querySelectorAll(".catalog-body__img-sl:not(.swiper-slide-active)").forEach(e=>{new CustomSwiper(e)})},close:e=>{scrollOn()}}})),t.target.classList.contains("js-modal-close")&&(t.preventDefault(),Fancybox.close()),t.target.classList.contains("js-modal-inline")&&(t.preventDefault(),Fancybox.close(),e=t.target.dataset.src,Fancybox.show([{src:e,type:"inline",Carousel:{Navigation:!1},hideScrollbar:!1,Hash:!1,groupAttr:!1}],{dragToClose:!1,autoFocus:!1,on:{done:e=>{scrollBlock(),e.container.querySelectorAll("#remove-all").length&&document.addEventListener("click",e=>{e.target.classList.contains("basket__control-mob-link_remove-ok")&&(document.querySelectorAll(".basket-complect").length&&document.querySelectorAll(".basket-complect").forEach(e=>{e.remove()}),document.querySelectorAll(".basket__item").length)&&document.querySelectorAll(".basket__item").forEach(e=>{e.remove()})}),e.container.querySelectorAll("#remove").length&&document.addEventListener("click",e=>{e.target.classList.contains("basket__control-mob-link_remove-ok")&&(e.preventDefault(),t.target.closest(".basket-complect")&&t.target.closest(".basket-complect").remove(),t.target.closest(".basket__item")&&t.target.closest(".basket__item").remove(),Fancybox.close())}),e.container.querySelectorAll("#remove-check").length&&document.addEventListener("click",e=>{document.addEventListener("click",e=>{e.target.classList.contains("basket__control-mob-link_remove-ok")&&(e.preventDefault(),document.querySelectorAll(".basket__checkbox-item input:checked").length&&document.querySelectorAll(".basket__checkbox-item input:checked").forEach(e=>{e.closest(".basket__item").remove()}),document.querySelectorAll(".basket-complect__head-check input:checked").length&&document.querySelectorAll(".basket-complect__head-check input:checked").forEach(e=>{e.closest(".basket-complect").remove()}),Fancybox.close(),btRemoveAll())})}),e.container.querySelectorAll("#map-availability").length&&!document.querySelectorAll("ymaps").length&&mapsAvailability()},close:e=>{scrollOn(),t.target.classList.contains("basket__insurance-link")&&t.target.classList.remove("_active")}}}),setTimeout(()=>{var e;t.target.classList.contains("header-city__link")&&(modalSticky(),(e=document.querySelector(".city-search__input"))&&e.blur(),document.querySelector("#city").closest(".fancybox__slide").classList.add("fancy-city"))},300),t.target.classList.contains("basket__insurance-link"))&&(t.target.classList.add("_active"),document.querySelectorAll(".insurance-foot__button._active").length)&&((e=document.querySelector(".insurance-foot__button._active")).querySelector("span").textContent=e.dataset.no,e.querySelector("use").setAttribute("xlink:href","img/sprite.svg#icon-plus"),e.classList.remove("button__border"),e.classList.remove("_active"),e.classList.remove("button__border"),e.classList.remove("_active"))}),Fancybox.bind(".js-gallery",{Carousel:{},Hash:!1,Thumbs:!1,Toolbar:{display:{left:["infobar"],middle:[],right:["close"]}}});const modalSticky=()=>{document.querySelector(".fancybox__slide").addEventListener("scroll",function(){var e=document.querySelector(".city-search__box");e.getBoundingClientRect().top<=0?e.classList.add("_sticky"):e.classList.remove("_sticky")})},scrollBlock=()=>{var e=window.pageYOffset;document.querySelector("body").style.setProperty("--top",`-${e}px`),document.querySelector("body").classList.add("blockScroll")},scrollOn=()=>{var e=document.querySelector("body"),e=window.getComputedStyle(e),e=Math.abs(parseInt(e.getPropertyValue("--top")));document.querySelector("body").classList.remove("blockScroll"),document.documentElement.scrollTop=e};if(document.addEventListener("click",e=>{e.target.classList.contains("modal-close")&&(e.preventDefault(),Fancybox.close())}),document.querySelectorAll(".popular-slider").length&&document.querySelectorAll(".popular-slider").forEach(e=>{new Swiper(e,{slidesPerView:"auto",spaceBetween:8,slidesPerGroup:2,grabCursor:!0,resistanceRatio:.65,speed:400,direction:"horizontal",mousewheel:{enabled:!0,forceToAxis:!0},freeMode:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{768:{spaceBetween:16},800:{slidesPerGroup:3},920:{slidesPerGroup:3},1024:{slidesPerGroup:4},1230:{slidesPerGroup:5},1440:{spaceBetween:12,slidesPerGroup:4}}});e.addEventListener("wheel",e=>{0!==e.deltaX&&e.preventDefault()})}),document.addEventListener("DOMContentLoaded",function(){if(document.querySelector(".min-price")){class e extends HTMLElement{constructor(){super()}connectedCallback(){this.elements={container:this.querySelector(".range-container"),track:this.querySelector(".range-container > div"),from:this.querySelector('input[type="range"]:first-of-type'),to:this.querySelector('input[type="range"]:last-of-type'),minInput:this.querySelector(".min-price"),maxInput:this.querySelector(".max-price")},this.elements.from.addEventListener("input",this.handleInput.bind(this)),this.elements.to.addEventListener("input",this.handleInput.bind(this)),this.elements.minInput.addEventListener("input",this.handleTextInput.bind(this)),this.elements.maxInput.addEventListener("input",this.handleTextInput.bind(this)),this.updateDom(),o(this.elements.minInput),o(this.elements.maxInput)}disconnectedCallback(){delete this.elements}get from(){return parseInt(this.elements.from.value)}get to(){return parseInt(this.elements.to.value)}handleInput(e){parseInt(this.elements.to.value)-parseInt(this.elements.from.value)<=1&&(e.target===this.elements.from?this.elements.from.value=parseInt(this.elements.to.value)-1:e.target===this.elements.to&&(this.elements.to.value=parseInt(this.elements.from.value)+1)),parseInt(this.elements.from.value)>parseInt(this.elements.to.value)&&([this.elements.from.value,this.elements.to.value]=[this.elements.to.value,this.elements.from.value],this.updateDom()),this.drawOutput(),o(this.elements.minInput),o(this.elements.maxInput)}handleTextInput(e){var t=parseInt(e.target.value);isNaN(t)||(e.target===this.elements.minInput?this.elements.from.value=t:e.target===this.elements.maxInput&&(this.elements.to.value=t)),parseInt(this.elements.from.value)>parseInt(this.elements.to.value)&&([this.elements.from.value,this.elements.to.value]=[this.elements.to.value,this.elements.from.value],this.updateDom()),this.drawOutput(),o(this.elements.minInput),o(this.elements.maxInput)}updateDom(){this.drawFill(),this.drawOutput()}drawFill(){var e=this.elements.from.value/this.elements.from.max*100,t=this.elements.to.value/this.elements.to.max*100;this.elements.track.style.background=`linear-gradient(to right, var(--track-color) ${e}%, var(--track-highlight-color) ${e}%, var(--track-highlight-color) ${t}%, var(--track-color) ${t}%)`}drawOutput(){this.elements.minInput.value=""+this.elements.from.value,this.elements.maxInput.value=""+this.elements.to.value}}customElements.define("price-range",e);const t=document.querySelector(".min-price"),r=document.querySelector(".max-price");function o(e){t=e.value,o=getComputedStyle(e).font,(r=(r=document.createElement("canvas")).getContext("2d")).font=o;var t,o,r=(o=r.measureText(t)).width;e.style.width=r+10+"px"}t.addEventListener("input",function(){o(t)}),r.addEventListener("input",function(){o(r)})}}),document.querySelectorAll(".basket__promocode").length){const $2=document.querySelector(".basket__promocode"),_2=$2.closest(".basket__promocode-box"),ad=document.querySelector(".basket__promocode-button");let o=[];fetch("json/promo.json").then(e=>e.json()).then(e=>{o=e,ad.disabled=!1}),document.querySelector(".promocode-box__form").addEventListener("submit",function(e){e.preventDefault();const t=$2.value.trim();o.find(e=>e.promo===t)?(_2.classList.add("_ok"),_2.classList.remove("_error")):(_2.classList.add("_error"),_2.classList.remove("_ok"))}),$2.addEventListener("input",function(){_2.classList.remove("_ok"),_2.classList.remove("_error")});const cd=e=>{e.value.length?e.closest(".basket__promocode-box").querySelector(".basket__promocode-button").removeAttribute("disabled"):e.closest(".basket__promocode-box").querySelector(".basket__promocode-button").setAttribute("disabled",!0)};document.querySelectorAll(".basket__promocode").forEach(t=>{t.addEventListener("input",e=>{cd(e.target)}),t.addEventListener("focus",e=>{t.classList.add("_active")}),t.addEventListener("blur",e=>{0==t.value.length&&t.classList.remove("_active")})})}if(document.querySelectorAll(".reviews__stars").length){const od=document.querySelectorAll(".reviews__stars");od.forEach(e=>{var t=parseFloat(e.getAttribute("data-rating"));let o="";for(let e=0;e<5;e++)e<Math.floor(t)?o+=`
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M9.26919 1.53637C9.15809 1.31545 8.84243 1.31627 8.73247 1.53776L6.62436 5.78413C6.58046 5.87255 6.49587 5.93372 6.39815 5.94771L1.60732 6.63327C1.36017 6.66863 1.26184 6.97279 1.44152 7.14614L4.90845 10.491C4.9804 10.5604 5.01304 10.6611 4.9955 10.7595L4.1693 15.3964C4.12552 15.6422 4.38344 15.8308 4.60433 15.7146L8.85978 13.4758C8.94721 13.4298 9.05168 13.4298 9.13911 13.4758L13.3965 15.7151C13.6172 15.8312 13.875 15.6429 13.8316 15.3973L13.0112 10.7591C12.9939 10.6609 13.0264 10.5605 13.0982 10.4911L16.5598 7.14563C16.7391 6.97229 16.6409 6.6685 16.394 6.63297L11.6315 5.94767C11.5344 5.93369 11.4503 5.87314 11.4062 5.78551L9.26919 1.53637Z" fill="#0E0E0E" stroke="#0E0E0E" stroke-width="1.3" stroke-linejoin="round"/>
                    </svg>
                `:e===Math.floor(t)&&t%1!=0?o+=`
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.4281V3.51317L6.62436 6.28413C6.58046 6.37255 6.49587 6.43372 6.39815 6.44771L1.60732 7.13327C1.36017 7.16863 1.26184 7.47279 1.44152 7.64614L4.90845 10.991C4.9804 11.0604 5.01304 11.1611 4.9955 11.2595L4.1693 15.8964C4.12552 16.1422 4.38344 16.3308 4.60433 16.2146L8 14.4281Z" fill="#0E0E0E"/>
                    <path d="M8 14.4281L4.60433 16.2146C4.38344 16.3308 4.12552 16.1422 4.1693 15.8964L4.9955 11.2595C5.01304 11.1611 4.9804 11.0604 4.90845 10.991L1.44152 7.64614C1.26184 7.47279 1.36017 7.16863 1.60732 7.13326L6.39815 6.44771C6.49587 6.43372 6.58046 6.37255 6.62436 6.28413L8 3.51317M8 14.4281L8.85978 13.9758C8.94721 13.9298 9.05168 13.9298 9.13911 13.9758L13.3965 16.2151C13.6172 16.3312 13.875 16.1429 13.8316 15.8973L13.0112 11.2591C12.9939 11.1609 13.0264 11.0605 13.0982 10.9911L16.5598 7.64563C16.7391 7.47229 16.6409 7.1685 16.394 7.13297L11.6315 6.44767C11.5344 6.43369 11.4503 6.37314 11.4062 6.28551L9.26919 2.03637C9.15809 1.81545 8.84243 1.81627 8.73247 2.03776L8 3.51317M8 14.4281V3.51317" stroke="#0E0E0E" stroke-width="1.3" stroke-linejoin="round"/>
                    </svg>
                `:o+=`
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M9.26919 1.53637C9.15809 1.31545 8.84243 1.31627 8.73247 1.53776L6.62436 5.78413C6.58046 5.87255 6.49587 5.93372 6.39815 5.94771L1.60732 6.63327C1.36017 6.66863 1.26184 6.97279 1.44152 7.14614L4.90845 10.491C4.9804 10.5604 5.01304 10.6611 4.9955 10.7595L4.1693 15.3964C4.12552 15.6422 4.38344 15.8308 4.60433 15.7146L8.85978 13.4758C8.94721 13.4298 9.05168 13.4298 9.13911 13.4758L13.3965 15.7151C13.6172 15.8312 13.875 15.6429 13.8316 15.3973L13.0112 10.7591C12.9939 10.6609 13.0264 10.5605 13.0982 10.4911L16.5598 7.14563C16.7391 6.97229 16.6409 6.6685 16.394 6.63297L11.6315 5.94767C11.5344 5.93369 11.4503 5.87314 11.4062 5.78551L9.26919 1.53637Z" stroke="#0E0E0E" stroke-width="1.3" stroke-linejoin="round"/>
                    </svg>
                `;e.innerHTML=o})}if(document.querySelectorAll(".reviews__grade-link").length&&(document.addEventListener("click",e=>{e.target.classList.contains("reviews__grade-link")&&(e.preventDefault(),e.target.classList.toggle("reviews__grade-link_active"),e.target.classList.contains("reviews__grade-link_active")?e.target.querySelector("span").textContent=++e.target.querySelector("span").textContent:e.target.querySelector("span").textContent=--e.target.querySelector("span").textContent),e.target.classList.contains("reviews__vis")&&(e.preventDefault(),e.target.closest(".reviews__items").classList.toggle("_show"),e.target.closest(".reviews__items").classList.contains("_show")?e.target.textContent=event.target.getAttribute("data-hide"):e.target.textContent=event.target.getAttribute("data-vis"))}),document.querySelectorAll(".reviews__result-sort-item").forEach(e=>{var t=+e.querySelector(".reviews__result-sort-minus").textContent,o=+e.querySelector(".reviews__result-sort-plus").textContent;let r;t<o&&(r=o/((o+t)/100)),o<t&&(r=t/((o+t)/100)),t==o&&(r=50),e.style.setProperty("--widthLine",r+"%")})),document.querySelectorAll(".reviews").length){function createStars(t,o){for(let e=0;e<o;e++){var r=`<span data-index="${e}"><svg width="24" height="24" ><use xlink:href="img/sprite.svg#icon-stars"></use></svg></span>`;t.insertAdjacentHTML("beforeend",r)}}const yd=document.querySelector(".reviews-rating__select-stars"),zd=(createStars(yd,5),document.querySelectorAll(".reviews-rating__select-stars span")),Ad=document.querySelector(".reviews-rating__select-input");function handleMouseOver(e){const o=parseInt(e.target.dataset.index);zd.forEach((e,t)=>{t<=o?e.classList.add("_active"):document.querySelectorAll("._clicked").length||e.classList.remove("_active")})}function handleClick(e){var t=parseInt(e.target.dataset.index);Ad.value=t+1,zd.forEach(e=>{e.classList.remove("_clicked"),document.querySelectorAll("._clicked").length||e.classList.remove("_active")}),handleMouseOver(e),e.target.classList.add("_clicked")}function handleMouseOut(){zd.forEach(e=>{document.querySelectorAll("._clicked").length||e.classList.remove("_active")})}zd.forEach(e=>{e.addEventListener("mouseover",handleMouseOver),e.addEventListener("click",handleClick)}),document.querySelector(".reviews-rating__select").addEventListener("mouseout",handleMouseOut)}function setCustomVh(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px")}if(document.addEventListener("DOMContentLoaded",function(){var e,t=document.documentElement;t&&(e=window.getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-bottom"))&&(t.style.paddingBottom=e)}),document.querySelector(".select-box-js")&&document.addEventListener("click",e=>{var t,o,r,e=e["target"];e.classList.contains("select-box-js__current")?e.classList.toggle("select-box-js__current_active"):e.classList.contains("select-box-js__li")?(document.querySelectorAll(".select-box-js__li").forEach(e=>{e.classList.remove("select-box-js__li_active")}),t=e.textContent,o=e.dataset.val,r=e.closest(".select-box-js"),e.classList.add("select-box-js__li_active"),r.querySelector(".select-box-js__current").textContent=o,r.querySelector(".select-box-js__current").classList.remove("select-box-js__current_active"),r.querySelector(".select-box-js__input").textContent=t):document.querySelector(".select-box-js__current").classList.remove("select-box-js__current_active")}),window.addEventListener("resize",setCustomVh),setCustomVh(),document.querySelectorAll(".tabs").length&&(document.querySelectorAll(".tabs").forEach(e=>{const o=e.querySelectorAll(".tabs__li"),r=e.querySelectorAll(".tabs__container");o.forEach((e,t)=>{e.addEventListener("click",()=>{o.forEach(e=>e.classList.remove("_current")),r.forEach(e=>e.classList.remove("_active")),e.classList.add("_current"),r[t].classList.add("_active")})})}),document.querySelectorAll("a[data-tabs]").length)){const c3=document.querySelectorAll("[data-tabs]");function hasDisplayNoneParent(e){let t=e.parentElement;for(;t;){if("none"===window.getComputedStyle(t).getPropertyValue("display"))return!0;t=t.parentElement}return!1}c3.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("data-tabs");t.startsWith("#")&&(t=t.slice(1));var e=document.querySelectorAll(`[data-id="${t}"]`);let o=null;e.forEach(e=>{hasDisplayNoneParent(e)||(o=e).click()}),o&&(e=o.getBoundingClientRect().top+window.pageYOffset+-180,window.scrollTo({top:e,behavior:"smooth"}))})})}const labels=document.querySelectorAll("[data-tooltip]");function showTooltip(e){if(1024<=window.innerWidth||!e.target.classList.contains("tooltip-no-touch")){document.querySelectorAll(".tooltip").forEach(e=>e.remove());var t=e.target,o=t.dataset.tooltip||"";if(o){const r=createTooltip(t.dataset.title,t.dataset.class,o);document.body.appendChild(r),setPosition(e,r),setTimeout(()=>r.style.opacity="1",10),setTimeout(()=>r.style.transform="translateY(0px)",10);t=createBackground();document.body.appendChild(t),r.addEventListener("mouseout",()=>hideTooltip(r)),t.addEventListener("click",hideTooltip)}}}function hideTooltip(e){if(document.querySelectorAll(".tooltip").length){const t=document.querySelector(".tooltip"),o=document.querySelector(".tooltip__bg");t&&e.relatedTarget&&t.contains(e.relatedTarget)||(t.style.opacity="0",setTimeout(()=>t.remove(),300)),o&&(o.style.opacity="0",setTimeout(()=>o.remove(),300))}}function setPosition(e,t){var e=e.target.getBoundingClientRect(),o=window.innerWidth,r=t.offsetWidth,a=e.left+window.pageXOffset+e.width/2-r/2;t.style.left=Math.max(0,Math.min(o-r,a))+"px",t.style.top=e.top+window.pageYOffset+e.height+14+"px"}function createTooltip(e,t,o){var r=document.createElement("div"),a=(r.classList.add("tooltip"),console.log(e),e?((a=document.createElement("p")).classList.add("tooltip__title"),a.textContent=e,r.appendChild(a)):r.classList.add("_no-title"),o&&((e=document.createElement("p")).classList.add("tooltip__text"),e.innerHTML=o,r.appendChild(e)),document.createElement("a"));return a.classList.add("tooltip__close"),a.innerHTML=`
    <svg width="24" height="24">
      <use xlink:href="img/sprite.svg#icon-close"></use>
    </svg>
  `,a.addEventListener("click",hideTooltip),r.appendChild(a),t&&r.classList.add(t),r}function createBackground(){var e=document.createElement("div");return e.classList.add("tooltip__bg"),e}if(labels.forEach(e=>{e.addEventListener("mouseenter",showTooltip),e.addEventListener("touchstart",e=>{e.target.classList.contains("tooltip-no-touch")||e.preventDefault(),showTooltip(e)}),e.addEventListener("mouseleave",hideTooltip)}),document.querySelector(".formValid")){const N3=document.querySelectorAll(".formValid"),O3={rules:{phonemask:function(e){return 11==e.replace(/\D/g,"").length},reppassword:function(e){return e==document.querySelector('input[name="newpassword"]').value},mail:function(e){return(emailRegExp=/^[^\s@]+@[^\s@]+\.[^\s@]+$/).test(e)}},messages:{en:{required:{empty:"Заполните поле",incorrect:"Неправильно заполнено поле"},phonemask:{empty:"Введите номер телефона",incorrect:"Неправильный номер телефона"},mail:{empty:"Введите почту",incorrect:"Неверный формат электронной почты"},name:{incorrect:"Неправильно заполнено поле"},minlength:{incorrect:"Неправильно заполнено поле"},reppassword:{incorrect:"Неправильно заполнено поле"}}}},P3=(N3.forEach(o=>{new Validator(o,function(e,t){return t&&o.classList.contains("footer__callback-form")?(document.querySelector(".footer__callback-send").classList.add("footer__callback-send_active"),setTimeout(()=>{document.querySelector(".footer__callback-send").classList.remove("footer__callback-send_active")},5e3),!1):t},O3)}),document.querySelectorAll(".modal__form"));function isFieldValid(e){var t=e.dataset.rule,o=e.value.trim();return!(e.classList.contains("error")||""===o&&t.includes("required"))}function isFormValid(e){e=e.querySelectorAll("[data-rule]");return Array.from(e).every(isFieldValid)}function toggleSubmitButton(e){e.querySelector(".form-button").disabled=!isFormValid(e)}P3.forEach(t=>{t.querySelectorAll("[data-rule]").forEach(e=>{e.addEventListener("keyup",()=>{setTimeout(()=>{toggleSubmitButton(t)},500)})}),toggleSubmitButton(t)})}document.querySelectorAll(".viewed").length&&document.querySelectorAll(".viewed__slider").forEach(e=>{new Swiper(e,{spaceBetween:8,grabCursor:!0,slidesPerView:"auto",touchEventsTarget:"container",direction:"horizontal",slidesPerGroup:2,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},mousewheel:{enabled:!0,forceToAxis:!0},freeMode:!0,grid:{rows:2,fill:"row"},breakpoints:{1024:{spaceBetween:12,grid:{rows:1}},1300:{slidesPerGroup:3,spaceBetween:12,grid:{rows:1}}}});e.addEventListener("wheel",e=>{0!==e.deltaX&&e.preventDefault()})});